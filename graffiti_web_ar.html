<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>Web AR Graffiti Prototype</title>
    
    <!-- 1. Load A-Frame (handles the 3D scene) -->
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    
    <!-- 2. Load the AR.js library (handles camera access and tracking) -->
    <!-- We use the hiro marker tracking for simplicity, but for surface detection (like a wall), 
         we switch to the 'patt.kanji' marker or a custom marker for testing. -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

    <style>
        /* Make the AR view full screen and ensure proper font usage */
        body { margin: 0; overflow: hidden; font-family: sans-serif; }
        
        /* Style for the instruction message */
        #instructions {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            text-align: center;
            font-size: 16px;
            z-index: 100; /* Ensure it stays on top of the AR content */
            max-width: 90%;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>

<body>
    <!-- Instructions for the user -->
    <div id="instructions">
        Point your camera at a flat, visible AR marker (like the 'kanji' marker) to project the graffiti.
    </div>

    <!-- The A-Frame AR Scene -->
    <a-scene embedded
             arjs='sourceType: webcam; 
                   sourceUrl: ''; 
                   detectionMode: mono_and_matrix; 
                   matrixCodeType: 3x3; 
                   debugUIEnabled: false;'>

        <!-- Asset Management: Define the Graffiti Texture -->
        <a-assets>
            <!-- 
            *** MODIFICATION HERE: Replace the placeholder URL with your actual image file name. ***
            
            1. Upload your image (e.g., 'my_graffiti.png') to the same GitHub folder as this HTML file.
            2. Change the 'src' value below to match your image file name.
            -->
            <img id="graffitiTexture" src="my_graffiti.png" crossorigin="anonymous">
        </a-assets>

        <!-- 
        Marker Anchor: This is the core AR element.
        - type: 'pattern' means it uses a specific printed marker.
        - url: The default AR.js marker for the 'kanji' character. 
        
        For testing, you must print the 'kanji' marker (search for "AR.js kanji marker image") and place it on your wall.
        The graffiti will appear on top of this physical image.
        -->
        <a-marker preset="kanji">
            <!-- 
            The 3D object to be displayed (a simple plane).
            - color: We don't need color since we use a texture.
            - src: References the graffiti texture we defined in a-assets.
            - height/width: Defines the real-world size (e.g., 1 meter wide).
            - rotation: Rotates the plane to face the user when the marker is placed vertically.
            -->
            <a-plane src="#graffitiTexture" 
                     height="1.0" width="1.0" 
                     rotation="-90 0 0" 
                     position="0 0 0.001" 
                     shadow>
            </a-plane>
        </a-marker>

        <!-- The Camera: Necessary for the AR scene -->
        <a-entity camera></a-entity>
    </a-scene>
</body>
</html>
